---
import Layout from "@/layouts/Layout.astro";
import Section from "@/components/Section.astro";
import { ARCADE_EXPERIENCES } from "@/data/arcade";

const experience = ARCADE_EXPERIENCES.find((exp) => exp.slug === "roll-high-or-die");
if (!experience) {
  throw new Error("Roll High Or Die metadata is missing");
}
---

<Layout title={`Arcade / ${experience.title} â€” Matt Twells`}>
  <Section title={experience.title}>
    <div class="mx-auto max-w-4xl space-y-6 text-white/80">
      <p class="text-lg leading-relaxed text-white/80">{experience.description}</p>
      <div class="flex flex-wrap gap-2">
        {experience.tags.map((tag) => (
          <span class="text-xs font-mono tracking-[0.3em] uppercase text-white/60 bg-white/5 px-3 py-1 rounded-full border border-white/10">
            {tag}
          </span>
        ))}
      </div>
      <div class="flex flex-wrap gap-2">
        <a
          class="text-sm font-semibold uppercase tracking-[0.3em] text-white bg-black/40 border border-white/30 px-4 py-2 rounded-full hover:bg-white hover:text-black transition"
          href="/arcade"
        >
          Back to Arcade
        </a>
        {
          experience.links.map((link) => {
            const isExternal = !link.href.startsWith("/");
            return (
              <a
                class="text-sm font-semibold uppercase tracking-[0.3em] text-white bg-black/40 border border-white/30 px-4 py-2 rounded-full hover:bg-white hover:text-black transition"
                href={link.href}
                target={isExternal ? "_blank" : undefined}
                rel={isExternal ? "noreferrer" : undefined}
              >
                {link.label}
              </a>
            );
          })
        }
      </div>
      <div class="rounded-2xl border border-white/20 bg-black/90 p-6 shadow-[0_20px_60px_-40px_rgba(0,0,0,0.8)]">
        <p class="text-xs uppercase tracking-[0.3em] text-white/40">Play in the browser</p>
        <div class="mt-4 overflow-hidden rounded-xl border border-white/10">
          <iframe
            src="https://itch.io/embed-upload/16537846?color=333333"
            width="600"
            height="600"
            frameborder="0"
            allowfullscreen
            class="w-full max-w-full"
          >
            <a href="https://coldsmoke4776.itch.io/roll-high-or-die">Roll High Or Die</a>
          </iframe>
        </div>
      </div>
    </div>
  </Section>
</Layout>
