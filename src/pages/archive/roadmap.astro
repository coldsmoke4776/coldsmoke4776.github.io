---
import Layout from "@/layouts/Layout.astro";
import roadmap from "@/data/roadmap.json";

// Terminal-style badges
type Status = "complete" | "in-progress" | "planned";
const statusBadge = (status: Status) => {
  if (status === "complete") {
    return '<span class="px-2 py-0.5 text-xs font-mono rounded-sm bg-green-900 text-green-200">COMPLETE</span>';
  }
  if (status === "in-progress") {
    return '<span class="px-2 py-0.5 text-xs font-mono rounded-sm bg-yellow-900 text-yellow-200">IN PROGRESS</span>';
  }
  return '<span class="px-2 py-0.5 text-xs font-mono rounded-sm bg-gray-800 text-gray-300">PLANNED</span>';
};

// Helper to add a terminal-style prefix for staged categories
const formatCategory = (category: string) => {
  if (category.includes("Stage")) {
    return `> ${category}`;
  }
  return category;
};
---

<Layout title="Skills Roadmap">
  <section class="container mx-auto px-6 py-12 prose prose-lg text-gray-200">
    <h1 class="mb-4 text-green-400">Proficiency Roadmap</h1>
    <blockquote class="italic text-lg border-l-4 border-gray-600 pl-4 mb-8 text-pink-300">
      The way to kill imposter syndrome is with proof. Hereâ€™s mine.
    </blockquote>

    {roadmap.map((section, index) => (
      <div class="mb-12">
        <pre class="text-green-400 text-sm font-mono mb-4"># ---------------- {section.category} ---------------- #</pre>
        <div class="grid gap-6">
          {section.items.map((item) => (
            <div class="p-6 rounded-xl border border-gray-700 shadow-sm bg-black flex flex-col gap-2 transition-transform transform hover:-translate-y-1 hover:shadow-lg">
              <div class="flex flex-col md:flex-row md:items-center gap-3 justify-between">
                <span class="font-medium text-lg text-gray-100">{item.name}</span>
                <span set:html={statusBadge(item.status)} />
              </div>
              {item.description ? (
                <p class="text-sm text-gray-400 font-mono">{item.description}</p>
              ) : null}
              {item.repo ? (
                <a
                  href={item.repo}
                  target="_blank"
                  class="inline-block bg-green-500 text-black text-sm px-4 py-2 rounded hover:bg-green-400 font-mono self-start"
                >
                  GitHub Repo
                </a>
              ) : null}
            </div>
          ))}
        </div>
        {index < roadmap.length - 1 ? (
          <hr class="border-t border-dashed border-gray-700 mt-12" />
        ) : null}
      </div>
    ))}
  </section>
</Layout>
